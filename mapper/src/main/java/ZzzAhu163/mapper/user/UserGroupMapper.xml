<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ZzzAhu163.mapper.firstmapper.FirstMapper">

  <sql id="queryColumns">
    ${alias}.id,${alias}.name,${alias}.user_group_type,${alias}.is_build_in,
    ${alias}.description,${alias}.create_time
  </sql>

  <sql id="queryCondition">
    <where>
      <if test="id > 0">
        AND ${alias}.id = #{id}
      </if>
      <if test="name != null and name != ''">
        AND ${alias}.name = #{name}
      </if>
      <if test="keyWords != null and keyWords != ''">
        AND ${alias}.description like contact('%', #{keyWords}, '%')
      </if>
      <if test="startTime > 0">
        AND unix_timestamp(${alias}.create_time) >= #{startTime}
      </if>
      <if test="endTime > 0">
        AND unxi_timestamp(${alias}.create_time) <![CDATA[ <= ]]> #{endTime}
      </if>
      <if test="userGroup != null">
        <if test="userGroup.userGroupType != null">
          AND ${alias}.user_group_type = #{userGroup.userGroupType, typeHandler=ZzzAhu163.mapper.user.typehandler.GroupTypeHandler}
        </if>
        <if test="userGroup.isBuildIn != null">
          AND ${alias}.is_build_in = #{userGroup.isBuildIn, typeHandler=ZzzAhu163.base.baseObject.IsBuildIn}
        </if>
      </if>
    </where>
  </sql>

  <!--query list count-->
  <select id="queryUserGroupListCount">
    SELECT count(1) FROM user_group_list t
    <include refid="queryCondition">
      <property name="alias" value="t"/>
    </include>
  </select>

  <!--query list-->
  <select id="queryUserGrouoList" resultMap="">
    SELECT
    <include refid="queryColumns">
      <property name="alias" value="t"/>
    </include>
    FROM user_group_list t
    <include refid="queryCondition">
      <property name="alias" value="t"/>
    </include>
  </select>
</mapper>
